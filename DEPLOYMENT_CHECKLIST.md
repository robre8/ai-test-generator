# Deployment Checklist

Follow this checklist to deploy AI Test Generator to production on free-tier platforms.

## Prerequisites ‚úÖ

- [ ] Oracle Cloud Free Tier account created
- [ ] Render account created 
- [ ] Vercel account created
- [ ] Groq API key obtained ([console.groq.com](https://console.groq.com))
- [ ] GitHub repository: `robre8/ai-test-generator` up to date

---

## Step 1: Deploy Sandbox Service (Oracle Cloud) üñ•Ô∏è

### 1.1 Create VM Instance
- [ ] Go to Oracle Cloud Console ‚Üí Compute ‚Üí Instances
- [ ] Create VM.Standard.E2.1.Micro (Always Free)
- [ ] Select Oracle Linux 8 or Ubuntu 22.04
- [ ] Download SSH private key
- [ ] Note public IP: `_________________`

### 1.2 Configure VM
```bash
ssh -i ~/.ssh/oracle_key opc@<PUBLIC_IP>

# Install Docker
sudo yum install -y docker
sudo systemctl start docker
sudo systemctl enable docker
sudo usermod -aG docker $USER

# Log out and back in
exit
ssh -i ~/.ssh/oracle_key opc@<PUBLIC_IP>
```

- [ ] Docker installed and running
- [ ] User added to docker group

### 1.3 Configure Firewall
```bash
# VM Firewall
sudo firewall-cmd --permanent --add-port=8001/tcp
sudo firewall-cmd --reload
```

**Oracle Cloud Console:**
- [ ] Go to Networking ‚Üí VCN ‚Üí Security Lists
- [ ] Add Ingress Rule:
   - Source CIDR: `0.0.0.0/0`
   - Port: `8001`
   - Protocol: TCP

### 1.4 Deploy Service
```bash
git clone https://github.com/robre8/ai-test-generator.git
cd ai-test-generator

# Build sandbox image
docker build -f Dockerfile.sandbox -t ai-test-sandbox:latest .

# Build and run service
cd sandbox-service
docker build -t sandbox-service:latest .

docker run -d \
   --name sandbox-service \
   --restart unless-stopped \
   -p 8001:8001 \
   -v /var/run/docker.sock:/var/run/docker.sock \
   sandbox-service:latest
```

- [ ] Sandbox Docker image built
- [ ] Sandbox service running

### 1.5 Verify
```bash
curl http://localhost:8001/health
# Expected: {"status":"healthy","docker_available":true}
```

From your local machine:
```bash
curl http://<ORACLE_VM_IP>:8001/health
```

- [ ] Health check returns healthy status
- [ ] Service accessible from outside VM

**Sandbox URL:** `http://<ORACLE_VM_IP>:8001`

---

## Step 2: Deploy Backend (Render) üöÄ

### 2.1 Create Web Service
- [ ] Go to [dashboard.render.com](https://dashboard.render.com)
- [ ] Click **New +** ‚Üí **Web Service**
- [ ] Connect repository: `robre8/ai-test-generator`
- [ ] Configure:
  - Name: `ai-test-generator-backend`
  - Region: (Choose closest)
  - Branch: `main`
  - Runtime: `Docker`
  - Dockerfile: `Dockerfile.backend`
  - Instance Type: `Free`

### 2.2 Add Environment Variables
In Render service settings ‚Üí Environment:

```
GROQ_API_KEY=<your_groq_api_key>
SANDBOX_SERVICE_URL=http://<ORACLE_VM_IP>:8001
```

- [ ] `GROQ_API_KEY` added
- [ ] `SANDBOX_SERVICE_URL` set to Oracle VM URL

### 2.3 Deploy
- [ ] Click **Create Web Service**
- [ ] Wait for build (~5 minutes)
- [ ] Note backend URL: `_________________`

### 2.4 Verify
```bash
curl https://ai-test-generator-backend.onrender.com/
# Expected: {"message":"AI Test Generator API is running"}
```

- [ ] Backend deployed successfully
- [ ] API returns welcome message

**Backend URL:** `https://ai-test-generator-backend.onrender.com`

---

## Step 3: Deploy Frontend (Vercel) üåê

### 3.1 Create Project
- [ ] Go to [vercel.com/dashboard](https://vercel.com/dashboard)
- [ ] Click **Add New...** ‚Üí **Project**
- [ ] Import `robre8/ai-test-generator`
- [ ] Configure:
  - Framework: `Vite`
  - Root Directory: `frontend`
  - Build Command: `npm run build`
  - Output: `dist`

### 3.2 Add Environment Variable
In project settings ‚Üí Environment Variables:

```
VITE_API_URL=https://ai-test-generator-backend.onrender.com
```

- [ ] `VITE_API_URL` set to Render backend URL

### 3.3 Deploy
- [ ] Click **Deploy**
- [ ] Wait for build (~2 minutes)
- [ ] Note frontend URL: `_________________`

### 3.4 Verify
- [ ] Visit Vercel URL
- [ ] Paste sample code
- [ ] Click "Generate Tests"
- [ ] Verify tests are generated and executed

**Frontend URL:** `https://ai-test-generator.vercel.app`

---

## Final Verification ‚ú®

### Test Complete Flow

1. **Visit Frontend:**
   ```
   https://ai-test-generator.vercel.app
   ```

2. **Paste Sample Code:**
   ```python
   def add(a, b):
       return a + b
   ```

3. **Click "Generate Tests"**

4. **Expected Output:**
   - Tests generated by AI
   - Tests executed in sandbox
   - Results displayed with pass/fail status

- [ ] Frontend loads correctly
- [ ] Backend API responds
- [ ] Sandbox executes tests
- [ ] Complete flow works end-to-end

### Check Service Health

```bash
# Sandbox
curl http://<ORACLE_VM_IP>:8001/health

# Backend
curl https://ai-test-generator-backend.onrender.com/

# Frontend
curl https://ai-test-generator.vercel.app
```

- [ ] All services return successful responses

---

## Cost Summary üí∞

| Service | Plan | Cost |
|---------|------|------|
| Oracle Cloud | Always Free | $0 |
| Render | Free Tier | $0 |
| Vercel | Hobby | $0 |
| Groq API | Free Tier | $0 |
| **Total** | | **$0/month** |

---

## Troubleshooting üîß

### Sandbox Service Issues

**Connection refused:**
- [ ] Check Oracle Cloud ingress rule (port 8001)
- [ ] Verify VM firewall: `sudo firewall-cmd --list-all`
- [ ] Check service: `docker logs sandbox-service`

**Docker not available:**
- [ ] Restart Docker: `sudo systemctl restart docker`
- [ ] Check user in docker group: `groups`
- [ ] Rebuild service: `docker restart sandbox-service`

### Backend Issues

**Build fails:**
- [ ] Check GitHub repository is up to date
- [ ] Verify Dockerfile.backend exists
- [ ] Review Render build logs

**Cannot connect to sandbox:**
- [ ] Verify `SANDBOX_SERVICE_URL` in Render env vars
- [ ] Test sandbox URL: `curl http://<IP>:8001/health`
- [ ] Check Oracle VM is running

### Frontend Issues

**Cannot reach backend:**
- [ ] Verify `VITE_API_URL` in Vercel env vars
- [ ] Test backend URL: `curl https://<backend>/`
- [ ] Check browser console for errors

**Build fails:**
- [ ] Verify Root Directory = `frontend`
- [ ] Check Vercel build logs
- [ ] Verify package.json exists in frontend/

---

## Next Steps üéØ

After successful deployment:

- [ ] Add custom domain (optional)
- [ ] Set up monitoring/alerts
- [ ] Configure rate limiting
- [ ] Add analytics tracking
- [ ] Enable CORS if needed

---

## Support üìû

- **Deployment Guide:** [DEPLOYMENT.md](DEPLOYMENT.md)
- **GitHub Issues:** [github.com/robre8/ai-test-generator/issues](https://github.com/robre8/ai-test-generator/issues)
- **Security:** [SECURITY.md](SECURITY.md)

---

**Deployment completed! üéâ**

Your AI Test Generator is now running on production with $0/month cost.
